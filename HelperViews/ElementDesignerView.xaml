<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="MAUIDesigner.HelperViews.ElementDesignerView"
             x:Name="DesignerView">
    <AbsoluteLayout MinimumWidthRequest="20" MinimumHeightRequest="20" x:Name="EncapsulatingView" >
        <!-- Frame in the center -->
        <Border Stroke="#C49B33"
            StrokeThickness="4"
                VerticalOptions="FillAndExpand"
                HorizontalOptions="FillAndExpand"
     AbsoluteLayout.LayoutBounds="0.5, 0.5, 1, 1"
     AbsoluteLayout.LayoutFlags="All"
                x:Name="ElementBorder"
                Content="{Binding View, Source={x:Reference DesignerView}}" InputTransparent="True" 
        >
        </Border>

        <!-- Corner resize handles -->
        <!-- Top Left Rectangle -->
        <Rectangle 
            ZIndex="1000"
               x:Name="topLeftRect"
     WidthRequest="8"
     HeightRequest="8"
     Fill="Blue"
     AbsoluteLayout.LayoutBounds="0, 0, 0.05, 0.05"
     AbsoluteLayout.LayoutFlags="PositionProportional">
            <Rectangle.GestureRecognizers>
                <DragGestureRecognizer CanDrag="True" DragStarting="TopLeftScaled"/>
            </Rectangle.GestureRecognizers>
        </Rectangle>

        <!-- Top Right Rectangle -->
        <Rectangle 
            ZIndex="1000"
               x:Name="topRightRect"
     WidthRequest="8"
     HeightRequest="8"
     Fill="Blue"
     AbsoluteLayout.LayoutBounds="1, 0, 0.05, 0.05"
     AbsoluteLayout.LayoutFlags="PositionProportional">
            <Rectangle.GestureRecognizers>
                <DragGestureRecognizer CanDrag="True" DragStarting="TopRightScaled"/>
            </Rectangle.GestureRecognizers>
        </Rectangle>

        <!-- Bottom Left Rectangle -->
        <Rectangle 
            ZIndex="1000"
                x:Name="bottomLeftRect"
     WidthRequest="8"
     HeightRequest="8"
     Fill="Blue"
     AbsoluteLayout.LayoutBounds="0, 1, 0.05, 0.05"
     AbsoluteLayout.LayoutFlags="PositionProportional">

            <Rectangle.GestureRecognizers>
                <DragGestureRecognizer CanDrag="True" DragStarting="BottomLeftScaled"/>
            </Rectangle.GestureRecognizers>
        </Rectangle>

        <!-- Bottom Right Rectangle -->
        <Rectangle 
            ZIndex="1000"
                x:Name="bottomRightRect"
     WidthRequest="8"
     HeightRequest="8"
     Fill="Blue"
     AbsoluteLayout.LayoutBounds="1, 1, 0.05, 0.05"
     AbsoluteLayout.LayoutFlags="PositionProportional">

            <Rectangle.GestureRecognizers>
                <DragGestureRecognizer CanDrag="True" DragStarting="BottomRightScaled"/>
            </Rectangle.GestureRecognizers>
        </Rectangle>

        <!-- Side resize handles -->
        <!-- Top Edge -->
        <Rectangle 
            ZIndex="1000"
            x:Name="topEdgeRect"
            WidthRequest="60"
            HeightRequest="4"
            Fill="Green"
            AbsoluteLayout.LayoutBounds="0.5, 0, 0.4, 0.02"
            AbsoluteLayout.LayoutFlags="PositionProportional">
            <Rectangle.GestureRecognizers>
                <DragGestureRecognizer CanDrag="True" DragStarting="TopEdgeScaled"/>
            </Rectangle.GestureRecognizers>
        </Rectangle>

        <!-- Bottom Edge -->
        <Rectangle 
            ZIndex="1000"
            x:Name="bottomEdgeRect"
            WidthRequest="60"
            HeightRequest="4"
            Fill="Green"
            AbsoluteLayout.LayoutBounds="0.5, 1, 0.4, 0.02"
            AbsoluteLayout.LayoutFlags="PositionProportional">
            <Rectangle.GestureRecognizers>
                <DragGestureRecognizer CanDrag="True" DragStarting="BottomEdgeScaled"/>
            </Rectangle.GestureRecognizers>
        </Rectangle>

        <!-- Left Edge -->
        <Rectangle 
            ZIndex="1000"
            x:Name="leftEdgeRect"
            WidthRequest="4"
            HeightRequest="60"
            Fill="Green"
            AbsoluteLayout.LayoutBounds="0, 0.5, 0.02, 0.4"
            AbsoluteLayout.LayoutFlags="PositionProportional">
            <Rectangle.GestureRecognizers>
                <DragGestureRecognizer CanDrag="True" DragStarting="LeftEdgeScaled"/>
            </Rectangle.GestureRecognizers>
        </Rectangle>

        <!-- Right Edge -->
        <Rectangle 
            ZIndex="1000"
            x:Name="rightEdgeRect"
            WidthRequest="4"
            HeightRequest="60"
            Fill="Green"
            AbsoluteLayout.LayoutBounds="1, 0.5, 0.02, 0.4"
            AbsoluteLayout.LayoutFlags="PositionProportional">
            <Rectangle.GestureRecognizers>
                <DragGestureRecognizer CanDrag="True" DragStarting="RightEdgeScaled"/>
            </Rectangle.GestureRecognizers>
        </Rectangle>

        <!-- Size display label -->
        <Label 
            ZIndex="1000"
            x:Name="sizeLabel"
            FontSize="10"
            TextColor="White"
            BackgroundColor="Black"
            Padding="4,2"
            AbsoluteLayout.LayoutBounds="0.5, 0.5, 0.3, 0.1"
            AbsoluteLayout.LayoutFlags="PositionProportional"
            HorizontalTextAlignment="Center"
            VerticalTextAlignment="Center"
            IsVisible="False" />

        <AbsoluteLayout.GestureRecognizers>
            <DragGestureRecognizer CanDrag="True" DragStarting="DragGestureRecognizer_DragStarting"/>
            <TapGestureRecognizer Tapped="TapGestureRecognizer_Tapped"/>
        </AbsoluteLayout.GestureRecognizers>
    </AbsoluteLayout>
</ContentView>
